<div id="login-div">  
  <div class="errmsg">{{errmsg}}</div>
  
  <div class="username"><h1>Username</h1></div>
  <input type="text" ng-model="userID">

  <div class="password"><h1>Password</h1></div>
  <input type="password" ng-model="password">

  <button ng-click="mySubmit()"><h1>Login</h1></button>
  
  <button class="g-signin2" data-onsuccess="onSignIn"></button>
  <script>
    function onSignIn(googleUser) {
      var profile = googleUser.getBasicProfile();
      console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
      console.log('Name: ' + profile.getName());
      console.log('Image URL: ' + profile.getImageUrl());
      console.log('Email: ' + profile.getEmail());
    }</script>
  
  <div class="signUp"><h2>Don't have an account? <a href="/addUser">Sign Up here!</a></h2></div>  

  <script>
    qsp.controller('LoginController', function($scope,$http,$location,$rootScope) {
  
  $scope.errmsg    = "";
  $scope.userID    = $rootScope.userID ? $rootScope.userID : "";
  $scope.activePage = "/home";
  
  $scope.go = function(path){
    $location.path(path);
    $scope.activePage = path;
  };
  
  $scope.mySubmit = function(){
    var credentials = {uid : $scope.userID, pwd : $scope.password};
    
   $http.post('/login',credentials).then(function(response){
      switch (response.data.message){
        case "wrongUID":
          $scope.errmsg = "That username is not in our database. Please re-enter it";
          break;
        case "wrongPWD":
          $scope.errmsg = "That password does not match that username, please try again";
          break;
        case "success":
          $rootScope.userID = response.data.uid;
          $location.path('/home');
          break;  
        default:
          $scope.errmsg = "";
      }
    });
  };
  
  $scope.signUp = function(){
    var credentials = { username : $scope.userName,
                        password : $scope.password,
                        age      : $scope.age,
                        state    : $scope.state,
                        gender   : $scope.gender};
    $http.post('/addUser',credentials).then(function(response){
      $location.path('/home');
    });
  };
});
  </script>

</div>

